<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nexus Radio</title>
    <meta name="description" content="Bienvenue sur Nexus Radio, ton univers musical en ligne !">
    <meta name="keywords" content="radio, musique, en ligne, streaming, Nexus Radio">
    <meta name="author" content="Nexus Radio Team">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap');

        body {
            margin: 0;
            padding: 0;
            font-family: 'Poppins', sans-serif;
            background-color: #000;
            color: #fff;
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            overflow: hidden;
            position: relative;
        }

        .container {
            background: rgba(0, 0, 0, 0.7);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0px 0px 30px 0px rgba(0, 0, 0, 0.6);
            max-width: 90%;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            z-index: 2;
        }

        h1 {
            font-size: 3em;
            margin-bottom: 20px;
            color: #ffffff;
            text-shadow: 0 0 15px rgba(255, 255, 255, 0.6);
            animation: pulse 2.5s infinite;
        }

        p {
            font-size: 1.4em;
            margin-bottom: 30px;
            color: #d0d0d0;
        }

        audio {
            border-radius: 20px;
            box-shadow: 0px 0px 25px 0px rgba(0, 0, 0, 0.4);
            width: 100%;
            max-width: 400px;
        }

        .background-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: linear-gradient(45deg, #ff0000, #ff7300, #fffb00, #48ff00, #00ffd5, #002bff, #7a00ff, #ff00c8, #ff0000);
            background-size: 400% 400%;
            animation: gradient 15s ease infinite;
        }

        .visualizer {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 150px;
            z-index: 1;
        }

        canvas {
            width: 100%;
            height: 100%;
        }

        .equalizer {
            margin-top: 20px;
            display: flex;
            justify-content: space-around;
            width: 100%;
        }

        .equalizer input[type=range] {
            width: 15%;
            transform: rotate(-90deg);
        }

        @keyframes gradient {
            0% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
            100% {
                background-position: 0% 50%;
            }
        }

        @keyframes pulse {
            0%, 100% {
                text-shadow: 0 0 10px rgba(255, 255, 255, 0.6);
            }
            50% {
                text-shadow: 0 0 20px rgba(255, 255, 255, 1);
            }
        }

        @media (max-width: 600px) {
            h1 {
                font-size: 2.2em;
            }

            p {
                font-size: 1.1em;
            }

            audio {
                width: 100%;
                height: 50px;
            }
            .equalizer input[type=range] {
                width: 20%;
            }
        }
    </style>
</head>
<body>

    <div class="background-animation"></div>

    <div class="container" role="main">
        <h1>Bienvenue sur Nexus Radio</h1>
        <p>Ton univers, ta radio</p>
        <audio id="radio-player" controls>
            <source src="https://listen.radioking.com/radio/679306/stream/743671" type="audio/mpeg">
            Votre navigateur ne supporte pas l'élément audio.
        </audio>
        <div id="equalizer-root"></div>
        <div class="visualizer">
            <canvas id="visualizer-canvas"></canvas>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/17.0.2/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/17.0.2/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.26.0/babel.min.js"></script>

    <script type="text/babel">
        class AudioEqualizer extends React.Component {
            constructor(props) {
                super(props);
                this.audioContext = null;
                this.audioElement = null;
                this.analyser = null;
                this.canvas = React.createRef();
                this.canvasContext = null;
                this.state = {
                    filters: []
                };
            }

            componentDidMount() {
                this.setupAudioContext();
                this.setupCanvas();
                this.createFilters();
                this.connectAudio();
                this.drawVisualizer();
            }

            setupAudioContext() {
                this.audioContext = new (window.AudioContext || window.webkitAudioContext)();
                this.audioElement = document.getElementById('radio-player');

                const source = this.audioContext.createMediaElementSource(this.audioElement);
                this.analyser = this.audioContext.createAnalyser();
                this.analyser.fftSize = 256;
                source.connect(this.analyser);
                this.analyser.connect(this.audioContext.destination);
            }

            setupCanvas() {
                this.canvasContext = this.canvas.current.getContext('2d');
                this.canvas.current.width = window.innerWidth;
                this.canvas.current.height = 150;
            }

            createFilters() {
                const frequencies = [60, 170, 350, 1000, 3500, 10000];
                const filters = frequencies.map(frequency => {
                    const filter = this.audioContext.createBiquadFilter();
                    filter.type = 'peaking';
                    filter.frequency.value = frequency;
                    filter.Q.value = 1;
                    filter.gain.value = 0;
                    return filter;
                });

                filters.reduce((prev, curr) => {
                    prev.connect(curr);
                    return curr;
                }).connect(this.analyser);

                this.setState({ filters });
            }

            connectAudio() {
                this.audioElement.onplay = () => {
                    this.audioContext.resume();
                };
            }

            changeGain(index, value) {
                const filters = this.state.filters;
                filters[index].gain.value = value;
                this.setState({ filters });
            }

            drawVisualizer() {
                requestAnimationFrame(this.drawVisualizer.bind(this));
                const bufferLength = this.analyser.frequencyBinCount;
                const dataArray = new Uint8Array(bufferLength);
                this.analyser.getByteFrequencyData(dataArray);

                this.canvasContext.clearRect(0, 0, this.canvas.current.width, this.canvas.current.height);

                const barWidth = (this.canvas.current.width / bufferLength) * 2.5;
                let barHeight;
                let x = 0;

                for (let i = 0; i < bufferLength; i++) {
                    barHeight = dataArray[i];
                    this.canvasContext.fillStyle = `rgb(${barHeight + 100},50,50)`;
                    this.canvasContext.fillRect(x, this.canvas.current.height - barHeight / 2, barWidth, barHeight / 2);

                    x += barWidth + 1;
                }
            }

            render() {
                return (
                    <div className="equalizer">
                        {this.state.filters.map((filter, index) => (
                            <input
                                key={index}
                                type="range"
                                min="-30"
                                max="30"
                                value={filter.gain.value}
                                step="1"
                                onChange={(e) => this.changeGain(index, e.target.value)}
                            />
                        ))}
                    </div>
                );
            }
        }

        ReactDOM.render(<AudioEqualizer />, document.getElementById('equalizer-root'));
    </script>
</body>
</html>
